<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>中国地图飞线</title>
    <style>
      #china {
        width: 1370px;
        height: 600px;
      }
    </style>
</head>

<body>
  <div id="china"></div>
</body>
<script src="js/echarts.min.js"></script>
<script src="js/china.js"></script>
<script type="text/javascript">
    var chinaGeoCoordMap = {
'王一尧':[116.308264,39.995304],
'王绎澎':[118.890830,31.938011],
'叶浩徐':[121.594551,31.176140],
'叶新宇':[118.857244,32.026884],
'朱永泽':[118.961365,32.110012],
'朱家培':[118.857244,32.026884],
'伍轩熠':[114.409978,30.509334],
'刘星宇':[108.985650,34.250189],
'芮煜涵':[113.999607,22.597729],
'李恺麟':[118.814249,32.070478],
'杨亦尧':[113.837933,22.625876],
'杨济源':[116.326582,40.002436],
'杨洋':[118.961365,32.110012],
'杨笑涵':[117.255582,31.838229],
'时照东':[121.210861,31.288713],
'吴优优':[113.837933,22.625876],
'沐知周':[125.280441,43.827437],
'沈笑':[116.326582,40.002436],
'张一鸣':[103.857658,36.045806],
'张帅':[114.365248,30.537860],
'张佳昊':[120.641182,31.302245],
'张程熙':[116.308264,39.995304],
'陈诚':[116.347313,39.981771],
'陈柯睿':[116.358103,39.961554],
'陈淏曦':[117.255582,31.838229],
'周子岩':[118.961365,32.110012],
'周泽昕':[118.961365,32.110012],
'赵翊淞':[118.961365,32.110012],
'俞越':[116.326582,40.002436],
'袁月昊':[120.568047,31.300606],
'袁心鸣':[121.425413,31.206075],
'徐佳烨':[116.333580,39.988014],
'殷勖翀':[116.310015,40.089676],
'奚铭浩':[113.999607,22.597729],
'郭丰恺':[120.376091,31.482067],
'唐德睿':[125.280441,43.827437],
'谈明笑':[118.820289,32.035021],
'龚晋贤':[118.814249,32.070478],
'蒋熠喆':[120.376091,31.482067],
'韩子梁':[118.798150,32.046546],
'福添熠':[108.915307,34.231049],
'翟绍均':[121.453679,31.031557],
'丁零':[118.890830,31.938011],
'王予璇':[106.467730,29.561465],
'王辰文':[120.376091,31.482067],
'史家瑶':[118.798150,32.046546],
'苏贝贝':[118.961365,32.110012],
'沈语涵':[118.715506,32.203356],
'张楠溪':[113.837933,22.625876],
'周芷轩':[118.961365,32.110012],
'周奕含':[120.738777,31.273245],
'唐若芸':[118.961365,32.110012],
'黄浠衍':[122.080958,37.526852],
'薛沁宜':[118.759463,32.055548]
    };
    var chinaDatas = [
[{ name:'王一尧', value: 12 }],
[{ name:'王绎澎', value: 12 }],
[{ name:'叶浩徐', value: 12 }],
[{ name:'叶新宇', value: 12 }],
[{ name:'朱永泽', value: 12 }],
[{ name:'朱家培', value: 12 }],
[{ name:'伍轩熠', value: 12 }],
[{ name:'刘星宇', value: 12 }],
[{ name:'芮煜涵', value: 12 }],
[{ name:'李恺麟', value: 12 }],
[{ name:'杨亦尧', value: 12 }],
[{ name:'杨济源', value: 12 }],
[{ name:'杨洋', value: 12 }],
[{ name:'杨笑涵', value: 12 }],
[{ name:'时照东', value: 12 }],
[{ name:'吴优优', value: 12 }],
[{ name:'沐知周', value: 12 }],
[{ name:'沈笑', value: 12 }],
[{ name:'张一鸣', value: 12 }],
[{ name:'张帅', value: 12 }],
[{ name:'张佳昊', value: 12 }],
[{ name:'张程熙', value: 12 }],
[{ name:'陈诚', value: 12 }],
[{ name:'陈柯睿', value: 12 }],
[{ name:'陈淏曦', value: 12 }],
[{ name:'周子岩', value: 12 }],
[{ name:'周泽昕', value: 12 }],
[{ name:'赵翊淞', value: 12 }],
[{ name:'俞越', value: 12 }],
[{ name:'袁月昊', value: 12 }],
[{ name:'袁心鸣', value: 12 }],
[{ name:'徐佳烨', value: 12 }],
[{ name:'殷勖翀', value: 12 }],
[{ name:'奚铭浩', value: 12 }],
[{ name:'郭丰恺', value: 12 }],
[{ name:'唐德睿', value: 12 }],
[{ name:'谈明笑', value: 12 }],
[{ name:'龚晋贤', value: 12 }],
[{ name:'蒋熠喆', value: 12 }],
[{ name:'韩子梁', value: 12 }],
[{ name:'福添熠', value: 12 }],
[{ name:'翟绍均', value: 12 }],
[{ name:'丁零', value: 12 }],
[{ name:'王予璇', value: 12 }],
[{ name:'王辰文', value: 12 }],
[{ name:'史家瑶', value: 12 }],
[{ name:'苏贝贝', value: 12 }],
[{ name:'沈语涵', value: 12 }],
[{ name:'张楠溪', value: 12 }],
[{ name:'周芷轩', value: 12 }],
[{ name:'周奕含', value: 12 }],
[{ name:'唐若芸', value: 12 }],
[{ name:'黄浠衍', value: 12 }],
[{ name:'薛沁宜', value: 12 }]
    ];
    var convertData = function(data) {
      var res = [];
      for(var i = 0; i < data.length; i++) {
        var dataItem = data[i];
        // 飞线图的起点
        var fromCoord =  [119.967167,31.777087]; // 飞线图的目标点
        var toCoord =chinaGeoCoordMap[dataItem[0].name];
        if (fromCoord && toCoord) {
          res.push([{
            coord: fromCoord,
            value: dataItem[0].value
          }, 
          {
            coord: toCoord,
          }]);
        }
      }
      return res;
    };
    var series = [];
    [['省常中', chinaDatas]].forEach(function(item, i) {
      console.log('---item----', item[1]);
      series.push({
        type: 'lines',
        zlevel: 2,
        effect: {
          show: true,
          period: 6, //箭头指向速度，值越小速度越快
          trailLength: 0.01, //特效尾迹长度[0,1]值越大，尾迹越长重
          symbol: "arrow",
          color: "#FFFFFF",
          symbolSize: 8, //图标大小
        },
        lineStyle: {
          normal: {
                    show: true,
                    width: 1, //尾迹线条宽度
                    opacity: 0.6, //尾迹线条透明度
                    curveness: 0.3, //尾迹线条曲直度
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      {
                        offset: 0,
                        color: "#FFEA00" // 0% 处的颜色
                      },
                      {
                        offset: 1,
                        color: "#FFAA33" // 100% 处的颜色
                      }
                    ])
                  }
        },
        data: convertData(item[1])
      },
            // {
			// 	type: 'effectScatter',
			// 	coordinateSystem: 'geo',
			// 	zlevel: 2,
			// 	rippleEffect: { //涟漪特效
			// 		period: 4, //动画时间，值越小速度越快
			// 		brushType: 'stroke', //波纹绘制方式 stroke, fill
			// 		scale: 4 //波纹圆环最大限制，值越大波纹越大
			// 	},
			// 	label: {
			// 		normal: {
			// 			show: true,
			// 			position: 'right', //显示位置
			// 			offset: [5, 0], //偏移设置
			// 			formatter: function(params){//圆环显示文字
			// 				return params.data.name;
			// 			},
			// 			fontSize: 13
			// 		},
			// 		emphasis: {
			// 			show: true
			// 		}
			// 	},
			// 	symbol: 'circle',
			// 	symbolSize: function(val) {
			// 		return 5+ val[2] * 5; //圆环大小
			// 	},
			// 	itemStyle: {
			// 		normal: {
			// 			show: false,
			// 			color: '#f00'
			// 		}
			// 	},
			// 	data: item[1].map(function(dataItem) {
			// 		return {
			// 			name: dataItem[0].name,
			// 			value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])
			// 		};
			// 	}),
			// },
			//被攻击点
			// {
			// 	type: 'scatter',
			// 	coordinateSystem: 'geo',
			// 	zlevel: 2,
			// 	rippleEffect: {
			// 		period: 4,
			// 		brushType: 'stroke',
			// 		scale: 4
			// 	},
			// 	label: {
			// 		normal: {
			// 			show: true,
			// 			position: 'right',
			// 			//offset:[5, 0],
			// 			color: '#0f0',
			// 			formatter: '{b}',
			// 			textStyle: {
			// 				color: "#0f0"
			// 			}
			// 		},
			// 		emphasis: {
			// 			show: true,
			// 			color: "#f60"
			// 		}
			// 	},
			// 	symbol: 'pin',
			// 	symbolSize: 50,
			// 	data: [{
			// 		name: item[0],
			// 		value: chinaGeoCoordMap[item[0]].concat([10]),
			// 	}],
			// }
	  );
    });
    var option = {
      tooltip: {
        trigger: 'item',
        backgroundColor: 'rgba(166, 200, 76, 0.82)',
        borderColor: '#FFFFCC',
        showDelay: 0,
        hideDelay: 0,
        enterable: true,
        transitionDuration: 0,
        extraCssText: 'z-index:100',
        formatter: function(params, ticket, callback) {
				//根据业务自己拓展要显示的内容
				var res = "";
				var name = params.name;
				var value = params.value[params.seriesIndex + 1];
				res = "<span style='color:#fff;'>" + name + "</span><br/>数据：" + value;
				return res;
			}
      },
      backgroundColor:"#013954", // 地图背景
      geo: {
        map: 'china',
        zoom: 1.2,
        label: {
          emphasis: {
            show: false
          }
        },
        roam: true, //是否允许缩放
        itemStyle: {
          normal: {
            color: 'rgba(51, 69, 89, .5)', //地图背景色
            borderColor: '#516a89', //省市边界线00fcff 516a89
            borderWidth: 1
          },
          emphasis: {
            color: 'rgba(37, 43, 61, .5)' //悬浮背景
          }
        }
      },
      series: series
    };
    let china = echarts.init(document.getElementById('china'));
    china.setOption(option);
</script>
</html>